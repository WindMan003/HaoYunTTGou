{"version":3,"sources":[null,"webpack:///D:/Work/好运天天购/components/cart/create-cartid-popup.vue?3c72","webpack:///D:/Work/好运天天购/components/cart/create-cartid-popup.vue?8a37","webpack:///D:/Work/好运天天购/components/cart/create-cartid-popup.vue?4e98","uni-app:///components/cart/create-cartid-popup.vue"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAgI;AAChI;AACuE;AACL;;;AAGlE;AACmK;AACnK,gBAAgB,6KAAU;AAC1B,EAAE,yFAAM;AACR,EAAE,8FAAM;AACR,EAAE,uGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,kGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA,WAAW,8LAEN;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACdA;AAAA;AAAA;AAAA;AAAgnB,CAAgB,6nBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACuCpoB;;AAEA,gD;;AAEA;AACA,gBADA;;AAGA,WAHA;;AAKA,MALA,kBAKA;AACA;AACA,qBADA;;AAGA,GATA;AAUA;AACA;AACA,8DADA;AAEA,8EAFA;AAGA,qEAHA;AAIA,uEAJA;AAKA,2DALA,GADA;;AAQA,2BARA,CAVA;;;;AAsBA;AACA;AACA,uBADA;AAEA,iBAFA;AAGA,oBAHA;AAIA,UAJA,EADA;;AAOA;AACA,oBADA,EAPA;;;AAWA,aAXA,uBAWA;AACA;AACA;AACA,KAdA;AAeA,eAfA,uBAeA,CAfA,EAeA;AACA;AACA,KAjBA;AAkBA,YAlBA,sBAkBA;AACA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,sCADA;AAEA,mCAFA;AAGA;AACA,qBADA,EAHA;AAKA,YALA,CAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WATA,MASA;AACA;AACA;AACA,SApBA;AAqBA;AACA,KA9CA;AA+CA,cA/CA,wBA+CA;AACA;AACA;AACA;AACA,oCADA;AAEA,8BAFA;AAGA;AACA,mBADA,EAHA;AAKA,UALA,CAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SARA,MAQA;AACA;AACA;AACA,OAnBA;AAoBA,KAtEA;AAuEA,oBAvEA,8BAuEA;AACA;AACA;AACA;AACA;AACA;AACA,mHADA;AAEA,iCAFA;AAGA,KA/EA;AAgFA;AACA,gBAjFA,wBAiFA,GAjFA,EAiFA;AACA;AACA;AACA,KApFA,GAtBA,E","file":"components/cart/create-cartid-popup.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./create-cartid-popup.vue?vue&type=template&id=62c36ce0&\"\nvar renderjs\nimport script from \"./create-cartid-popup.vue?vue&type=script&lang=js&\"\nexport * from \"./create-cartid-popup.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"Work/好运天天购/components/cart/create-cartid-popup.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./create-cartid-popup.vue?vue&type=template&id=62c36ce0&\"","var components = {\n  uniPopup: function() {\n    return import(\n      /* webpackChunkName: \"components/uni-popup/uni-popup\" */ \"@/components/uni-popup/uni-popup.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./create-cartid-popup.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./create-cartid-popup.vue?vue&type=script&lang=js&\"","<template>\r\n\t<uni-popup type=\"center\" ref=\"popup\" className=\"uni-popup__wrapper-box-goods-spec\">\r\n\t\t<view class=\"d-flex flex-column w-100\" style=\"height: 500rpx; background-color: #FFFFFF; border-radius: 3%;\">\r\n\t\t\t<view class=\"w-100 border-bottom text-center font-36 font-weight mt-2\" style=\"height: 90rpx\">\r\n\t\t\t\t加入/创建购物车\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"text-center mt-1 font-28 w-100\">\r\n\t\t\t\t加入其他人的购物车\r\n\t\t\t</view>\r\n\t\t\t<view class=\"d-flex j-center mt-2\">\r\n\t\t\t\t<view class=\"p-1\" style=\"width: 35%;\">\r\n\t\t\t\t\t<input class=\"text-center border-bottom font-28\" type=\"number\" confirm-type='done' \r\n\t\t\t\t\tfocus=\"true\" value=\"\" placeholder=\"输入4位购物车ID\" maxlength=\"4\" @input=\"cartIdInput\"/>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t\t<view class=\"border text-center font-28 font-weight p\"\r\n\t\t\t\tstyle=\"background: #FFA500; border-radius: 10rpx; width: 160rpx; color: #FFFFFF;\"\r\n\t\t\t\t@click=\"joinCart\">\r\n\t\t\t\t\t点击加入\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<view class=\"ml-3 mt-3 font-28 w-100 text-center\">\r\n\t\t\t\ttips:或者点击创建按钮创建自己的购物车\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<view class=\"d-flex a-center j-center mt-2\">\r\n\t\t\t\t<view class=\"border text-center font-40 font-weight p-1\" \r\n\t\t\t\tstyle=\"background: #FFA500; border-radius: 10rpx; width: 200rpx; color: #FFFFFF;\"\r\n\t\t\t\t@click=\"createCart\">\r\n\t\t\t\t\t创建\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</uni-popup>\n</template>\n\n<script>\r\n\timport websocket from \"@/common/lib/websocket.js\"\r\n\r\n\timport {mapState,mapGetters,mapActions,mapMutations} from \"vuex\"\r\n\t\r\n\texport default{\r\n\t\tcomponents:{\r\n\t\t},\r\n\t\tprops:{\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tinputCartId: ''\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed:{\r\n\t\t\t...mapState({\r\n\t\t\t\tcartId:state=>state.cart.cartId,\r\n\t\t\t\tmerchantID:state=>state.merchant.merchantID,\r\n\t\t\t\ttableID:state=>state.merchant.tableID,\r\n\t\t\t\tappConfig:state=>state.user.appConfig,\r\n\t\t\t\ttoken:state=>state.user.token\r\n\t\t\t}),\r\n\t\t\t...mapGetters([\r\n\r\n\t\t\t]),\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\t...mapMutations([\r\n\t\t\t\t'updateCartGoodsList',\r\n\t\t\t\t'updateOrderID',\r\n\t\t\t\t'initIsCartCreate',\r\n\t\t\t\t'initID'\r\n\t\t\t]),\r\n\t\t\t...mapActions([\r\n\t\t\t\t'updateCartIdFunc'\r\n\t\t\t]),\r\n\t\t\t\r\n\t\t\tshowPopup(){\r\n\t\t\t\t//初始化数据\r\n\t\t\t\tthis.$refs.popup.open()\r\n\t\t\t},\r\n\t\t\tcartIdInput(e){\r\n\t\t\t\tthis.inputCartId = e.detail.value\r\n\t\t\t},\r\n\t\t\tjoinCart(){\r\n\t\t\t\tvar _self = this\r\n\t\t\t\tif(_self.inputCartId == 0){\r\n\t\t\t\t\tuni.showToast({title: '请输入4位购物车ID', icon: 'none', duration: 1500})\r\n\t\t\t\t}else{\r\n\t\t\t\t\tuni.showLoading({title: '加入中...'})\r\n\t\t\t\t\t_self.$H.post('/api/Merchant/SelectCart',{\r\n\t\t\t\t\t\tMerchantID: _self.merchantID,\r\n\t\t\t\t\t\tCartID: _self.inputCartId\r\n\t\t\t\t\t},{\r\n\t\t\t\t\t\ttoken:true\r\n\t\t\t\t\t}).then(res=>{\r\n\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\tif(res.status == 0){\r\n\t\t\t\t\t\t\t_self.updateCartIdFunc(res.data.CartID)\r\n\t\t\t\t\t\t\t_self.initID(res.data.ID)\r\n\t\t\t\t\t\t\t_self.syncCartList(res.data)\r\n\t\t\t\t\t\t\t_self.connectWebsocket()\r\n\t\t\t\t\t\t\t_self.updateOrderID(0)\r\n\t\t\t\t\t\t\t_self.initIsCartCreate(false)\r\n\t\t\t\t\t\t\t_self.inputCartId = ''\r\n\t\t\t\t\t\t\t_self.$refs.popup.onTap()\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t_self.$Common.showToast(res)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcreateCart(){\r\n\t\t\t\tvar _self = this\r\n\t\t\t\tuni.showLoading({title: '创建中...'})\r\n\t\t\t\t_self.$H.post('/api/Merchant/CreateShoppingCart',{\r\n\t\t\t\t\tMerchantID: _self.merchantID,\r\n\t\t\t\t\tTableID: _self.tableID\r\n\t\t\t\t},{\r\n\t\t\t\t\ttoken:true\r\n\t\t\t\t}).then(res=>{\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\tif(res.status == 0){\r\n\t\t\t\t\t\t_self.updateCartIdFunc(res.data.CartID)\r\n\t\t\t\t\t\t_self.initID(res.data.ID)\r\n\t\t\t\t\t\t_self.connectWebsocket()\r\n\t\t\t\t\t\t_self.updateOrderID(0)\r\n\t\t\t\t\t\t_self.initIsCartCreate(true)\r\n\t\t\t\t\t\t_self.inputCartId = ''\r\n\t\t\t\t\t\t_self.$refs.popup.onTap()\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\t_self.$Common.showToast(res)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tconnectWebsocket(){\r\n\t\t\t\tconsole.log(this.merchantID)\r\n\t\t\t\tconsole.log(this.cartId)\r\n\t\t\t\tconsole.log(this.token)\r\n\t\t\t\t//socket连接\r\n\t\t\t\twebsocket.initWebSocket(this.syncCartList, \r\n\t\t\t\tJSON.stringify({action:'startOrder', merchantID:this.merchantID, cartID:this.cartId, token:this.token}),\r\n\t\t\t\tthis.appConfig.WebSocketUrl)\r\n\t\t\t},\r\n\t\t\t//更新购物车数据\r\n\t\t\tsyncCartList(res){\r\n\t\t\t\tconsole.log(res)\r\n\t\t\t\tthis.updateCartGoodsList(res.Products)\r\n\t\t\t},\r\n\t\t}\r\n\t}\n</script>\n\n<style>\r\n\n</style>\n"],"sourceRoot":""}