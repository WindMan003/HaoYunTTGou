{"version":3,"sources":[null,"webpack:///D:/Work/好运天天购/components/cart/goods-popup.vue?6cef","webpack:///D:/Work/好运天天购/components/cart/goods-popup.vue?6b2a","webpack:///D:/Work/好运天天购/components/cart/goods-popup.vue?b08a","uni-app:///components/cart/goods-popup.vue"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAwH;AACxH;AAC+D;AACL;;;AAG1D;AACmK;AACnK,gBAAgB,6KAAU;AAC1B,EAAE,iFAAM;AACR,EAAE,sFAAM;AACR,EAAE,+FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,0FAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA,WAAW,8LAEN;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACdA;AAAA;AAAA;AAAA;AAAwmB,CAAgB,qnBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACqD5nB,gD;;AAEA;AACA;AACA,sBADA;AAEA,gBAFA;AAGA,4BAHA,EADA;;AAMA,WANA;;AAQA,MARA,kBAQA;AACA;AACA;AACA,mBAFA;AAGA,gBAHA;AAIA,gBAJA;AAKA,eALA;AAMA,mBANA;AAOA,2BAPA;AAQA;AACA,wBATA;;AAWA,GApBA;AAqBA;AACA;AACA,sFADA;AAEA,4FAFA;AAGA,oFAHA;AAIA,8DAJA;AAKA,8EALA;AAMA,qEANA,GADA;;AASA;AACA,iBADA;AAEA,kBAFA,EATA;;;AAcA,kBAdA,4BAcA;AACA;AACA,KAhBA;AAiBA,kBAjBA,4BAiBA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,OAFA,MAEA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,KArCA;AAsCA,iBAtCA,2BAsCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAlDA,GArBA;;AAyEA;AACA;AACA,UADA,EADA;;AAIA;AACA,sBADA;AAEA,sBAFA;AAGA,oBAHA,EAJA;;;AAUA,eAVA,uBAUA,KAVA,EAUA;AACA;AACA;AACA;AACA,KAdA;AAeA,uBAfA,+BAeA,KAfA,EAeA;AACA;AACA;AACA;AACA,KAnBA;AAoBA,aApBA,qBAoBA,OApBA,EAoBA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,KAvCA;AAwCA;AACA,0BAzCA,oCAyCA;AACA;AACA,+BADA;AAEA,+BAFA;AAGA,6BAHA;;AAKA,KA/CA;AAgDA,iBAhDA,2BAgDA;AACA;AACA,KAlDA;AAmDA,iBAnDA,2BAmDA;AACA;AACA,KArDA;AAsDA,mBAtDA,2BAsDA,MAtDA,EAsDA;AACA;AACA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA,qCADA;AAEA,+BAFA;AAGA;AACA,qBADA,EAHA;AAKA,YALA,CAKA;AACA;AACA;AACA;AACA;AACA,WAJA,MAIA;AACA;AACA;AACA,SAbA;AAcA,OAfA,MAeA;AACA;AACA;AACA,KA7EA;AA8EA,sBA9EA,8BA8EA,MA9EA,EA8EA;AACA;AACA,4BADA;AAEA,iCAFA;AAGA,6BAHA;AAIA,2BAJA;AAKA,mCALA;;AAOA,KAtFA,GAzEA,E","file":"components/cart/goods-popup.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./goods-popup.vue?vue&type=template&id=11d2bb3a&\"\nvar renderjs\nimport script from \"./goods-popup.vue?vue&type=script&lang=js&\"\nexport * from \"./goods-popup.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"Work/好运天天购/components/cart/goods-popup.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./goods-popup.vue?vue&type=template&id=11d2bb3a&\"","var components = {\n  uniPopup: function() {\n    return import(\n      /* webpackChunkName: \"components/uni-popup/uni-popup\" */ \"@/components/uni-popup/uni-popup.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./goods-popup.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./goods-popup.vue?vue&type=script&lang=js&\"","<template>\r\n\t<uni-popup type=\"center\" ref=\"popup\" className=\"uni-popup__wrapper-box-goods-spec\">\r\n\t\t<view class=\"d-flex a-center j-center w-100\" style=\"height: 100%;\">\r\n\t\t\t<view class=\"border w-100\" style=\"height: 100%; background-color: #FFFFFF; border-radius: 3%;\">\r\n\t\t\t\t<view class=\"ml-3 mr-3\">\r\n\t\t\t\t\t<view class=\"mt-2 font-38 font-weight\">{{goodsList.Name}}</view>\r\n\t\t\t\t\t<block v-if=\"goodsList.TasteList\">\r\n\t\t\t\t\t\t<view class=\"mt-2 font-24\">口味</view>\r\n\t\t\t\t\t\t<view class=\"mt-1 d-flex flex-wrap\">\r\n\t\t\t\t\t\t\t<view class=\"mb-2 mr-3 p-1 border span24-6 font-24 text-center\" style=\"border-radius: 10rpx;\"\r\n\t\t\t\t\t\t\tv-for=\"(item,index) in goodsList.TasteList\" :key=\"index\"\r\n\t\t\t\t\t\t\t:style=\"tasteIndex === index ? getChooseColor:''\" @click=\"tasteChoose(index)\">\r\n\t\t\t\t\t\t\t\t<text class=\"d-flex a-center j-center\">{{item.Name}}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</block>\r\n\t\t\t\t\t<block v-if=\"goodsList.Specifications\">\r\n\t\t\t\t\t\t<view class=\"mt-2 font-24\">规格</view>\r\n\t\t\t\t\t\t<view class=\"mt-1 d-flex flex-wrap\">\r\n\t\t\t\t\t\t\t<view class=\"mb-2 mr-3 p-1 border span24-6 font-24 text-center\" style=\"border-radius: 10rpx;\"\r\n\t\t\t\t\t\t\tv-for=\"(item,index) in goodsList.Specifications\" :key=\"index\"\r\n\t\t\t\t\t\t\t:style=\"specificationIndex === index ? getChooseColor:''\" @click=\"specificationChoose(index)\">\r\n\t\t\t\t\t\t\t\t<text class=\"d-flex a-center j-center\">{{item.Name}}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</block>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"mt-3 border-bottom border-top w-100 d-flex a-center\" style=\"height: 80rpx; background: #EEEEEE;\">\r\n\t\t\t\t\t<text class=\"ml-3 font-28\">{{getSelectedStr}}</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"pb-1 mt-3 mb-2 d-flex a-center position-relative w-100\">\r\n\t\t\t\t\t<view class=\"ml-3\">\r\n\t\t\t\t\t\t<price>{{getGoodsPrice}}</price>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"position-absolute border pl-2 pr-2\" \r\n\t\t\t\t\tstyle=\"right: 10rpx; background: #FFA500; border-radius: 10rpx;\" \r\n\t\t\t\t\tv-if=\"nowChooseCount === 0\" @click=\"addGoodsTouch\">\r\n\t\t\t\t\t\t<text class=\"font-28\">加入购物车</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"position-absolute pl-2 pr-2\" style=\"right: 10rpx;\" v-else>\r\n\t\t\t\t\t\t<hx-number-box :value=\"nowChooseCount\" :nameid=\"goodsId\" :tasteId=\"tasteId\" :specId=\"specId\"></hx-number-box>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\t\t\t\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</uni-popup>\n</template>\n\n<script>\r\n\timport hxNumberBox from \"@/components/uni-number-box/uni-number-box.vue\";\r\n\timport uniPopup from \"@/components/uni-popup/uni-popup.vue\"\r\n\timport price from \"@/components/common/price.vue\"\r\n\t\r\n\timport {mapState,mapGetters,mapActions,mapMutations} from \"vuex\"\r\n\t\r\n\texport default{\r\n\t\tcomponents:{\r\n\t\t\tuniPopup,\r\n\t\t\tprice,\r\n\t\t\thxNumberBox\r\n\t\t},\r\n\t\tprops:{\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\t//商品信息\r\n\t\t\t\tgoodsList:{},\r\n\t\t\t\tgoodsId:0,\r\n\t\t\t\ttasteId:0,\r\n\t\t\t\tspecId:0,\r\n\t\t\t\ttasteIndex:0,\r\n\t\t\t\tspecificationIndex:0,\r\n\t\t\t\t//当前选中是否已有\r\n\t\t\t\tchooseState:false\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed:{\r\n\t\t\t...mapState({\r\n\t\t\t\tnowChooseCount:state=>state.cart.nowChooseCount,\r\n\t\t\t\tchooseTotalPrice:state=>state.cart.chooseTotalPrice,\r\n\t\t\t\tisManyPeople:state=>state.merchant.isManyPeople,\r\n\t\t\t\tcartId:state=>state.cart.cartId,\r\n\t\t\t\tmerchantID:state=>state.merchant.merchantID,\r\n\t\t\t\ttableID:state=>state.merchant.tableID\r\n\t\t\t}),\r\n\t\t\t...mapGetters([\r\n\t\t\t\t'getGoodsCount',\r\n\t\t\t\t'getGoodsIdList',\r\n\t\t\t]),\r\n\t\t\t\r\n\t\t\tgetChooseColor(){\r\n\t\t\t\treturn 'background: #FFEFD5; border-color: #FF8C00; color: #FF8C00;'\r\n\t\t\t},\r\n\t\t\tgetSelectedStr(){\r\n\t\t\t\tlet tasteStr = null\r\n\t\t\t\tlet specStr = null\r\n\t\t\t\t\r\n\t\t\t\tif(this.goodsList){\r\n\t\t\t\t\tif(this.goodsList.TasteList){\r\n\t\t\t\t\t\ttasteStr = this.goodsList.TasteList[this.tasteIndex].Name\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(this.goodsList.Specifications){\r\n\t\t\t\t\t\tspecStr = this.goodsList.Specifications[this.specificationIndex].Name\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(tasteStr && specStr){\r\n\t\t\t\t\treturn `已选规格：${tasteStr}  ${specStr}`\r\n\t\t\t\t}else if(specStr && !tasteStr){\r\n\t\t\t\t\treturn `已选规格：${specStr}`\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn `已选口味：${tasteStr}`\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgetGoodsPrice(){\r\n\t\t\t\tif(this.chooseTotalPrice !== 0){\r\n\t\t\t\t\treturn this.chooseTotalPrice\r\n\t\t\t\t}\r\n\t\t\t\tif(this.goodsList){\r\n\t\t\t\t\tif(this.goodsList.Specifications){\r\n\t\t\t\t\t\treturn this.goodsList.Specifications[this.specificationIndex].Price\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(!this.goodsList.Specifications && this.goodsList.TasteList){\r\n\t\t\t\t\t\treturn this.goodsList.Price\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\t...mapMutations([\r\n\t\t\t\t'initID'\r\n\t\t\t]),\r\n\t\t\t...mapActions([\r\n\t\t\t\t'operationCartGoods',\r\n\t\t\t\t'updateSpecDateFunc',\r\n\t\t\t\t'updateCartIdFunc'\r\n\t\t\t]),\r\n\t\t\t\r\n\t\t\ttasteChoose(index){\r\n\t\t\t\tthis.tasteId = this.goodsList.TasteList[index].ID\r\n\t\t\t\tthis.tasteIndex = index\r\n\t\t\t\tthis.updateGoodsCountBySpec()\r\n\t\t\t},\r\n\t\t\tspecificationChoose(index){\r\n\t\t\t\tthis.specId = this.goodsList.Specifications[index].ID\r\n\t\t\t\tthis.specificationIndex = index\r\n\t\t\t\tthis.updateGoodsCountBySpec()\r\n\t\t\t},\r\n\t\t\tshowPopup(goodsId){\r\n\t\t\t\t//初始化数据\r\n\t\t\t\tthis.tasteIndex = 0\r\n\t\t\t\tthis.specificationIndex = 0\r\n\t\t\t\tthis.tasteId = 0\r\n\t\t\t\tthis.specId = 0\r\n\t\t\t\t\r\n\t\t\t\tthis.goodsId = goodsId\r\n\t\t\t\tthis.goodsList = this.getGoodsIdList(goodsId)\r\n\t\t\t\t\r\n\t\t\t\tif(this.goodsList.TasteList){\r\n\t\t\t\t\tthis.tasteId = this.goodsList.TasteList[this.tasteIndex].ID\r\n\t\t\t\t}\r\n\t\t\t\tif(this.goodsList.Specifications){\r\n\t\t\t\t\tthis.specId = this.goodsList.Specifications[this.specificationIndex].ID\r\n\t\t\t\t}\r\n\t\t\t\tthis.updateGoodsCountBySpec()\r\n\t\t\t\t\r\n\t\t\t\tthis.$refs.popup.open()\r\n\t\t\t},\r\n\t\t\t//更新商品数量\r\n\t\t\tupdateGoodsCountBySpec(){\r\n\t\t\t\tthis.updateSpecDateFunc({\r\n\t\t\t\t\t\"goodsId\":this.goodsId,\r\n\t\t\t\t\t\"tasteId\":this.tasteId,\r\n\t\t\t\t\t\"specId\":this.specId\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\taddGoodsTouch(){\r\n\t\t\t\tthis.operationResult('plus')\r\n\t\t\t},\r\n\t\t\tsubGoodsTouch(){\r\n\t\t\t\tthis.operationResult('minus')\r\n\t\t\t},\r\n\t\t\toperationResult(string){\r\n\t\t\t\t//判断是否是多人点单，如果是：判断是否创建了购物车ID\r\n\t\t\t\tif(this.isManyPeople && this.cartId === 0){\r\n\t\t\t\t\tthis.$emit(\"createid\")\r\n\t\t\t\t\treturn\r\n\t\t\t\t}else if(!this.isManyPeople && this.cartId === 0){\r\n\t\t\t\t\tthis.$H.post('/api/Merchant/CreateShoppingCart',{\r\n\t\t\t\t\t\tMerchantID:this.merchantID,\r\n\t\t\t\t\t\tTableID:this.tableID\r\n\t\t\t\t\t},{\r\n\t\t\t\t\t\ttoken:true\r\n\t\t\t\t\t}).then(res=>{\r\n\t\t\t\t\t\tif(res.status == 0){\r\n\t\t\t\t\t\t\tthis.updateCartIdFunc(res.data.CartID)\r\n\t\t\t\t\t\t\tthis.initID(res.data.ID)\r\n\t\t\t\t\t\t\tthis.addOrSunGoodsCount(string)\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\t_self.$Common.showToast(res)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.addOrSunGoodsCount(string)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\taddOrSunGoodsCount(string){\r\n\t\t\t\tthis.operationCartGoods({\r\n\t\t\t\t\toperationStr:string,\r\n\t\t\t\t\tnameid:this.goodsList.ID,\r\n\t\t\t\t\ttasteId:this.tasteId,\r\n\t\t\t\t\tspecId:this.specId,\r\n\t\t\t\t\tmerchantID:this.merchantID\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t}\r\n\t}\n</script>\n\n<style>\r\n\n</style>\n"],"sourceRoot":""}