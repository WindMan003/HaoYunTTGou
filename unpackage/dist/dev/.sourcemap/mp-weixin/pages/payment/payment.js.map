{"version":3,"sources":["uni-app:///main.js","webpack:///D:/Work/好运天天购/pages/payment/payment.vue?3008","webpack:///D:/Work/好运天天购/pages/payment/payment.vue?2cd3","webpack:///D:/Work/好运天天购/pages/payment/payment.vue?995e","webpack:///D:/Work/好运天天购/pages/payment/payment.vue?74af","uni-app:///pages/payment/payment.vue"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,kG;AACAA,UAAU,CAACC,gBAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAoH;AACpH;AAC2D;AACL;;;AAGtD;AACmK;AACnK,gBAAgB,6KAAU;AAC1B,EAAE,6EAAM;AACR,EAAE,kFAAM;AACR,EAAE,2FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,sFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACxBA;AAAA;AAAA;AAAA;AAAomB,CAAgB,inBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC4ExnB,gD;;AAEA;AACA,gBADA;;AAGA,MAHA,kBAGA;AACA;AACA,gBADA;AAEA,mBAFA;AAGA,eAHA;AAIA,mBAJA;AAKA,qBALA;;AAOA,GAXA;AAYA;AACA;AACA;AACA;AACA;AACA,OAJA;;;AAOA;AACA,GArBA;AAsBA;AACA;AACA,qEADA;AAEA,mFAFA;AAGA,8EAHA;AAIA,0FAJA;AAKA,oFALA;AAMA,oEANA,GADA;;AASA,2BATA;;;AAYA,iBAZA,2BAYA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,KAtBA,GAtBA;;AA8CA;AACA;AACA,iBADA;AAEA,iBAFA,EADA;;AAKA;AACA,oBADA,EALA;;AAQA,cARA,sBAQA,IARA,EAQA;AACA;AACA;;AAEA;AACA;AACA,OAFA,MAEA;AACA;AACA,OAFA,MAEA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,KArBA;AAsBA,eAtBA,yBAsBA;AACA;AACA,gBADA;;AAGA,KA1BA;AA2BA,aA3BA,uBA2BA;AACA;AACA;AACA,mBADA;AAEA,yBAFA;AAGA;AACA;AACA;AACA,WAFA,MAEA;AACA;AACA;AACA,SATA;;AAWA,KAxCA;AAyCA,eAzCA,yBAyCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCADA;AAEA,4BAFA;AAGA,kBAHA;AAIA,sBAJA;;AAMA;AACA;AACA,mBADA;AAEA,UAFA,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uFADA;;AAGA,WAPA,MAOA;AACA;AACA,sCADA;AAEA,oCAFA;;AAIA;AACA,SAjBA,MAiBA;AACA;AACA;AACA,OAzBA;AA0BA,KAlFA;AAmFA,YAnFA,sBAmFA;AACA;AACA,2BADA;;AAGA,KAvFA,GA9CA,E","file":"pages/payment/payment.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/payment/payment.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./payment.vue?vue&type=template&id=54ea2466&\"\nvar renderjs\nimport script from \"./payment.vue?vue&type=script&lang=js&\"\nexport * from \"./payment.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"Work/好运天天购/pages/payment/payment.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./payment.vue?vue&type=template&id=54ea2466&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.__map(_vm.cartGoodsList, function(item, index) {\n    var m0 = _vm.getSpecStr(item)\n    return {\n      $orig: _vm.__get_orig(item),\n      m0: m0\n    }\n  })\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./payment.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./payment.vue?vue&type=script&lang=js&\"","<template>\n\t<view class=\"\" style=\"background-color: #F5F5F5;\" :style=\"'height:'+ windowHeight + 'px'\">\r\n\t\t<scroll-view scroll-y :style=\"'height:'+ scrollH + 'px'\">\r\n\t\t\t<view class=\"d-flex a-center j-center\" style=\"height: 100rpx;\">\r\n\t\t\t\t<view class=\"d-flex a-center j-center rounded-10\" style=\"width: 94%; background-color: #48D1CC; height: 80rpx;\">\r\n\t\t\t\t\t<view class=\"font-32\">\r\n\t\t\t\t\t\t桌子号：{{tableID}}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"mt-1 d-flex a-center j-center\">\r\n\t\t\t\t<view class=\"rounded-10 d-flex flex-column bg-white pb-1\" style=\"width: 94%\">\r\n\t\t\t\t\t<view class=\"ml-2 mr-2\">\r\n\t\t\t\t\t\t<view class=\"mt-1 d-flex flex-row a-center position-relative\">\r\n\t\t\t\t\t\t\t<view class=\"font-36 font-weight\">{{merchantInfo.Name}}</view>\r\n\t\t\t\t\t\t\t<view class=\"position-absolute border rounded-25 pl-2 pr-2\" @click=\"continueAdd\"\r\n\t\t\t\t\t\t\tstyle=\"border-color: #48D1CC; color: #48D1CC; right: 10rpx;\">\r\n\t\t\t\t\t\t\t\t继续点餐\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"mt-2 border-bottom\"></view>\r\n\t\t\t\t\t\t<view class=\"d-flex flex-column\">\r\n\t\t\t\t\t\t\t<view class=\"mt-2\" style=\"color: #48D1CC;\">已点商品</view>\r\n\t\t\t\t\t\t\t<block v-for=\"(item, index) in cartGoodsList\" :key=\"index\">\r\n\t\t\t\t\t\t\t\t<view class=\"d-flex flex-row a-center mt-2\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"font-30\" style=\"width: 25%;\">{{item.ProductName}}</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"font-28\" style=\"width: 45%;\">{{getSpecStr(item)}}</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"font-28\" style=\"width: 15%;\">x{{item.Count}}</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"font-30 font-weight\" style=\"width: 15%;\">￥{{item.Price*item.Count}}</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t</block>\r\n\t\t\t\t\t\t\t<view class=\"mt-2 border-bottom\"></view>\r\n\t\t\t\t\t\t\t<view class=\"position-relative mt-3\" style=\"height: 80rpx;\">\r\n\t\t\t\t\t\t\t\t<view class=\"position-absolute\" style=\"right: 30rpx;\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"d-flex flex-row\">\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"font-36\">总价</view>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"font-36 font-weight\">￥{{getTotalPrice}}</view>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"d-flex a-center j-center mt-3\" style=\"height: 100rpx;\">\r\n\t\t\t\t<view class=\"d-flex a-center flex-row rounded-10 bg-white position-relative\" style=\"width: 94%; height: 100rpx;\">\r\n\t\t\t\t\t<view class=\"ml-3 font-32 font-weight\" style=\"width: 20%;\">\r\n\t\t\t\t\t\t备注\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"d-flex flex-row a-center\" style=\"width: 80%; height: 80rpx;\" @click=\"gotoNote\">\r\n\t\t\t\t\t\t<view class=\"text-muted position-absolute p\" style=\"right: 15rpx;\">\r\n\t\t\t\t\t\t\t<view class=\"\">{{cartNote}}</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</scroll-view>\r\n\t\t\r\n\t\t<view class=\"w-100 bottom-0 d-flex flex-row position-absolute\" style=\"height: 120rpx; margin-bottom: 40rpx; background-color: #696969;\">\r\n\t\t\t<view class=\"d-flex flex-row a-center ml-3\">\r\n\t\t\t\t<text class=\"font-36\" style=\"color: #FFFFFF;\">{{'¥'+getTotalPrice}}</text>\r\n\t\t\t</view>\r\n\t\t\r\n\t\t\t<view class=\"position-absolute\" style=\"right: 20rpx;\" @click=\"sureOrder\">\r\n\t\t\t\t<view class=\"d-flex a-center j-center\" style=\"height: 120rpx;\">\r\n\t\t\t\t\t<view class=\"pl-4 pr-4 p-1 font-36 rounded-50\" style=\"color: #FFFFFF; background-color: #48D1CC;\">\r\n\t\t\t\t\t\t确认订单\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\n</template>\n\n<script>\r\n\timport {mapState,mapGetters,mapActions,mapMutations} from \"vuex\"\r\n\t\n\texport default {\r\n\t\tcomponents:{\r\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tscrollH:0,\r\n\t\t\t\tisTouch:true,\r\n\t\t\t\tcartID:0,\r\n\t\t\t\ttotalPrice: 0,\r\n\t\t\t\twindowHeight: 0\n\t\t\t}\n\t\t},\r\n\t\tonLoad: function(option){\r\n\t\t\tuni.getSystemInfo({\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tthis.windowHeight = res.windowHeight\r\n\t\t\t\t\tthis.scrollH = res.windowHeight - uni.upx2px(165)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\tthis.cartID = option.cartID\r\n\t\t},\r\n\t\tcomputed:{\r\n\t\t\t...mapState({\r\n\t\t\t\ttableID:state=>state.merchant.tableID,\r\n\t\t\t\tcartGoodsList:state=>state.cart.cartGoodsList,\r\n\t\t\t\tmerchantID:state=>state.merchant.merchantID,\r\n\t\t\t\tmerchantStatus:state=>state.merchant.merchantStatus,\r\n\t\t\t\tmerchantInfo:state=>state.merchant.merchantInfo,\r\n\t\t\t\tcartNote:state=>state.cart.cartNote\r\n\t\t\t}),\r\n\t\t\t...mapGetters([\r\n\t\t\t]),\r\n\t\t\t\r\n\t\t\tgetTotalPrice(){\r\n\t\t\t\tvar _self = this\r\n\t\t\t\tvar total = 0\r\n\t\t\t\tvar temp = _self.cartGoodsList\r\n\t\t\t\tfor (var i = 0; i < temp.length; i++) {\r\n\t\t\t\t\ttotal = total + temp[i].Price * temp[i].Count\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t_self.totalPrice = total\r\n\t\t\t\treturn total\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\t...mapMutations([\r\n\t\t\t\t'clearCartList',\r\n\t\t\t\t'updateOrderID'\r\n\t\t\t]),\r\n\t\t\t...mapActions([\r\n\t\t\t\t'updateCartIdFunc'\r\n\t\t\t]),\r\n\t\t\tgetSpecStr(list){\r\n\t\t\t\tlet tasteName = list.TasteName ? list.TasteName:''\r\n\t\t\t\tlet specName = list.SpecificationName ? list.SpecificationName:''\r\n\t\t\t\r\n\t\t\t\tif(tasteName && specName){\r\n\t\t\t\t\treturn `规格：${specName}  ${tasteName}`\r\n\t\t\t\t}else if(specName){\r\n\t\t\t\t\treturn `规格：${specName}`\r\n\t\t\t\t}else if(tasteName){\r\n\t\t\t\t\treturn `口味：${tasteName}`\r\n\t\t\t\t}else{\r\n\t\t\t\t\treturn ''\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcontinueAdd(){\r\n\t\t\t\tuni.navigateBack({\r\n\t\t\t\t\tdelta: 1\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tsureOrder(){\r\n\t\t\t\tvar _self = this;\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t    title: '提示',\r\n\t\t\t\t    content: '确认提交订单',\r\n\t\t\t\t    success: function (res) {\r\n\t\t\t\t        if (res.confirm) {\r\n\t\t\t\t            _self.submitOrder()\r\n\t\t\t\t        } else if (res.cancel) {\r\n\t\t\t\t            console.log('用户点击取消');\r\n\t\t\t\t        }\r\n\t\t\t\t    }\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tsubmitOrder(){\r\n\t\t\t\tlet _self = this;\r\n\t\t\t\tconsole.log(\"确认订单\")\r\n\t\t\t\tuni.showLoading({title: '订单确认中...'})\r\n\t\t\t\tlet note = '无'\r\n\t\t\t\tif(_self.cartNote != '填写备注要求 >'){\r\n\t\t\t\t\tnote = _self.cartNote\r\n\t\t\t\t}\r\n\t\t\t\tlet postData = {\r\n\t\t\t\t\tMerchantID: _self.merchantID,\r\n\t\t\t\t\tCartID: _self.cartID,\r\n\t\t\t\t\tOrderID: 0,\r\n\t\t\t\t\tUserNote: note\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log(postData)\r\n\t\t\t\t_self.$H.post('/api/order/SubmitOrder', postData, {\r\n\t\t\t\t\ttoken:true\r\n\t\t\t\t}).then(res=>{\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\tif(res.status == 0){\r\n\t\t\t\t\t\t_self.updateOrderID(res.data)\r\n\t\t\t\t\t\t_self.updateCartIdFunc(0)\r\n\t\t\t\t\t\t_self.clearCartList()\r\n\t\t\t\t\t\tif(_self.merchantStatus.IsMustPayFirst == 1){\r\n\t\t\t\t\t\t\t// uni.redirectTo({\r\n\t\t\t\t\t\t\t// \turl:'./payment-order?orderID=' + res.data\r\n\t\t\t\t\t\t\t// })\r\n\t\t\t\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\t\t\t\turl:'./payment-order?price='+_self.totalPrice+'&orderID='+res.data\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tuni.navigateBack({\r\n\t\t\t\t\t\t\t\tanimationType: 'pop-out',\r\n\t\t\t\t\t\t\t\tanimationDuration: 200\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tuni.showToast({title:res.Message, icon: 'none', duration:1000})\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgotoNote(){\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl:'../note/note'\r\n\t\t\t\t})\r\n\t\t\t}\n\t\t}\r\n\t}\n</script>\n\n<style>\n\n</style>\n"],"sourceRoot":""}