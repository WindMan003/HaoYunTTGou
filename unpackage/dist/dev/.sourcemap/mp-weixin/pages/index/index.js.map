{"version":3,"sources":["uni-app:///main.js","webpack:///D:/Work/好运天天购/pages/index/index.vue?0a97","webpack:///D:/Work/好运天天购/pages/index/index.vue?f0af","webpack:///D:/Work/好运天天购/pages/index/index.vue?e4aa","webpack:///D:/Work/好运天天购/pages/index/index.vue?fe67","uni-app:///pages/index/index.vue"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,4F;AACAA,UAAU,CAACC,cAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAkH;AAClH;AACyD;AACL;;;AAGpD;AACmK;AACnK,gBAAgB,6KAAU;AAC1B,EAAE,2EAAM;AACR,EAAE,gFAAM;AACR,EAAE,yFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,oFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA,WAAW,6LAEN;AACL,GAAG;AACH;AACA,WAAW,uLAEN;AACL,GAAG;AACH;AACA,WAAW,4KAEN;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AC9DA;AAAA;AAAA;AAAA;AAAkmB,CAAgB,+mBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACyKtnB;;AAEA,gD;;AAEA;AACA;AACA,4BADA;AAEA,gBAFA;AAGA,0BAHA;AAIA,wBAJA;AAKA,wCALA;AAMA,sBANA;AAOA,kBAPA;AAQA,sBARA,EADA;;AAWA,WAXA;;;AAcA,MAdA,kBAcA;AACA;AACA,gBADA;AAEA,2BAFA;AAGA,sBAHA;AAIA,kBAJA,EAIA;AACA,iBALA;AAMA,kBANA;AAOA,sBAPA;AAQA,mBARA;AASA,qBATA;AAUA,0BAVA;AAWA,mBAXA;AAYA,uBAZA;AAaA;AACA;AACA,oBADA;AAEA,oBAFA;AAGA;AACA;AAJA,OAdA;;AAqBA,GApCA;AAqCA,QArCA,oBAqCA;AACA;AACA;AACA;AACA;AACA,OAHA;;;AAMA;AACA,GA9CA;AA+CA;AACA;AACA,mFADA;AAEA,8DAFA;AAGA,8EAHA;AAIA,qEAJA;AAKA,oFALA;AAMA,oEANA,GADA;;AASA;AACA,iBADA;AAEA,qBAFA;AAGA,gBAHA;AAIA,cAJA,EATA;;AAeA,gBAfA,0BAeA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAtBA,GA/CA;;AAuEA;AACA;AACA,uBADA;AAEA,sBAFA;AAGA,wBAHA,EADA;;AAMA;AACA,0BADA;AAEA,wBAFA;AAGA,oBAHA,EANA;;AAWA,sBAXA,gCAWA;AACA;AACA;AACA;AACA,oCADA;AAEA;AACA,mBADA,EAFA;AAIA,UAJA,CAIA;AACA;AACA;AACA;AACA;AACA,WAFA,MAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAfA;AAgBA,KA9BA;AA+BA;AACA,iBAhCA,2BAgCA;AACA;AACA;AACA;AACA,oCADA;AAEA;AACA,mBADA,EAFA;AAIA,UAJA,CAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAHA;AAIA;AACA;AACA,WAFA;AAGA;AACA;AACA;AACA;AACA;AACA,OApBA;AAqBA,KAxDA;AAyDA;AACA,mBA1DA,6BA0DA;AACA;AACA;AACA,4BADA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OATA;AAUA,KAzEA;AA0EA,gBA1EA,wBA0EA,KA1EA,EA0EA;AACA;AACA;AACA,sBADA;AAEA,2BAFA;AAGA,2BAHA;AAIA,kBAJA;;AAMA,KAlFA;AAmFA;AACA,eApFA,uBAoFA,OApFA,EAoFA;AACA;AACA;AACA,KAvFA;AAwFA;AACA,kBAzFA,4BAyFA;AACA;AACA;AACA;AACA;AACA;AACA,SAJA,MAIA;AACA;AACA;AACA;AACA,OATA,MASA;AACA;AACA;AACA,KAtGA;AAuGA;AACA,oBAxGA,8BAwGA;AACA;AACA,KA1GA;AA2GA,gBA3GA,0BA2GA;AACA;AACA;AACA,yDADA;;AAGA,OAJA,MAIA;AACA;AACA;;AAEA,KApHA;AAqHA,aArHA,qBAqHA,KArHA,EAqHA;AACA;AACA,KAvHA;AAwHA;AACA,eAzHA,uBAyHA,CAzHA,EAyHA;AACA;AACA,KA3HA;AA4HA;AACA,gBA7HA,wBA6HA,IA7HA,EA6HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAFA,EAEA,GAFA;AAGA,OAPA,MAOA;AACA;AACA;AACA;AACA,KAzIA;AA0IA,eA1IA,uBA0IA,CA1IA,EA0IA;AACA;AACA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAtJA;AAuJA;AACA,YAxJA,sBAwJA;AACA;AACA;AACA;AACA;AACA;AACA,sBADA;AAEA;AACA;AACA;AACA;AACA;AACA,WAPA,EAOA,IAPA;AAQA;AACA,OAZA;AAaA,KAvKA,GAvEA,E","file":"pages/index/index.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/index/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=c3eed7b6&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"Work/好运天天购/pages/index/index.vue\"\nexport default component.exports","export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=c3eed7b6&\"","var components = {\n  uniBadge: function() {\n    return import(\n      /* webpackChunkName: \"components/uni-badge/uni-badge\" */ \"@/components/uni-badge/uni-badge.vue\"\n    )\n  },\n  merchant: function() {\n    return import(\n      /* webpackChunkName: \"components/merchant/merchant\" */ \"@/components/merchant/merchant.vue\"\n    )\n  },\n  notice: function() {\n    return import(\n      /* webpackChunkName: \"components/notice/notice\" */ \"@/components/notice/notice.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.__map(_vm.categoryList, function(item, index) {\n    var m0 = _vm.getGoodsTypeCount(item.ID)\n    var m1 = _vm.getGoodsTypeCount(item.ID)\n    return {\n      $orig: _vm.__get_orig(item),\n      m0: m0,\n      m1: m1\n    }\n  })\n\n  var l2 = _vm.__map(_vm.categoryList, function(item, index) {\n    var l1 = _vm.__map(_vm.goodsList, function(rowData, index2) {\n      var m2 = _vm.getGoodsCount(rowData.ID)\n      var m3 = _vm.getGoodsCount(rowData.ID)\n      var m4 = _vm.getGoodsCount(rowData.ID)\n      return {\n        $orig: _vm.__get_orig(rowData),\n        m2: m2,\n        m3: m3,\n        m4: m4\n      }\n    })\n\n    return {\n      $orig: _vm.__get_orig(item),\n      l1: l1\n    }\n  })\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0,\n        l2: l2\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"main\">\r\n\t\t<view class=\"w-100 main-bg-color border-bottom position-relative\" style=\"height: 80rpx;\">\r\n\t\t\t<view class=\"d-flex flex-row\">\r\n\t\t\t\t<view class=\"d-flex flex-row a-center j-center font-32\"\r\n\t\t\t\tstyle=\"width: 120rpx; height: 80rpx;\"\r\n\t\t\t\tv-for=\"(item,index) in tabs\" :key=\"index\" @tap=\"changeTab(index)\">\r\n\t\t\t\t\t<text :class=\"tabIndex === index ? 'border-bottom-6 font-weight':'main-text-color'\">\r\n\t\t\t\t\t\t{{item.name}}\r\n\t\t\t\t\t</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- <view class=\"border font-28 pl-1 pr-1 position-absolute text-center\" \r\n\t\t\t\tstyle=\"border-color: #EE7621; color: #EE7621; right: 15rpx; bottom: 10rpx; border-radius: 8rpx;\"\r\n\t\t\t\t@click=\"onOrderList\">\r\n\t\t\t\t\t我的订单\r\n\t\t\t\t</view> -->\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t\r\n\t\t<swiper :duration=\"150\" :style=\"'height:'+(scrollH)+'px;'\" :current=\"tabIndex\" @change=\"onChangeTab\">\r\n\t\t\t<swiper-item class=\"swiper-item\">\r\n\t\t\t\t<!-- 左侧分类导航 -->\r\n\t\t\t\t<view class=\"d-flex flex-row w-100\">\r\n\t\t\t\t\t<scroll-view scroll-y class=\"left-bg-color\" style=\"width: 24%;\">\r\n\t\t\t\t\t\t<view class=\"w-100 d-flex a-center\" style=\"height: 90rpx;\"\r\n\t\t\t\t\t\tv-for=\"(item,index) in categoryList\" :key=\"index\" \r\n\t\t\t\t\t\t:class=\"item.indexId === currentId ? 'left-bg-color-hover':''\"\r\n\t\t\t\t\t\t@click=\"showCategory(item)\">\r\n\t\t\t\t\t\t\t<view class=\"w-100 font-28 text-center position-relative\">\r\n\t\t\t\t\t\t\t\t{{item.Name}}\r\n\t\t\t\t\t\t\t\t<view class=\"position-absolute\" style=\"right: 5rpx; top: -25rpx;\" v-if=\"getGoodsTypeCount(item.ID)>0\">\r\n\t\t\t\t\t\t\t\t\t<uni-badge :text=\"getGoodsTypeCount(item.ID)\" type=\"error\"></uni-badge>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</scroll-view>\r\n\t\t\t\t\t<!-- 右侧子导航 -->\r\n\t\t\t\t\t<scroll-view :croll-with-animation=\"true\" scroll-y style=\"left: 24%; width: 76%;\"\r\n\t\t\t\t\t:style=\"'height:'+(scrollH-45)+'px;'\" @scroll=\"asideScroll\" :scroll-top=\"tabScrollTop\">\r\n\t\t\t\t\t\t<view class=\"ml-3 mt\" v-for=\"(item,index) in categoryList\" :key=\"index\"\r\n\t\t\t\t\t\t:id=\"'goodsBox'+item.indexId\">\r\n\t\t\t\t\t\t\t<view class=\"font-32 bg-color-w position-sticky\" style=\"height: 70rpx; z-index: 18; top: 0;\">\r\n\t\t\t\t\t\t\t\t{{item.Name}}\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\r\n\t\t\t\t\t\t\t<view class=\"w-100\" v-for=\"(rowData, index2) in goodsList\" :key=\"index2\"\r\n\t\t\t\t\t\t\tv-if=\"item.ID == rowData.ProductTypeID\">\r\n\t\t\t\t\t\t\t\t<view class=\"d-flex flex-row mt-2\" style=\"height: 200rpx;\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"main-bg-color-w\" style=\"width: 170rpx; height: 170rpx; border-radius: 10rpx;\">\r\n\t\t\t\t\t\t\t\t\t\t<image :src=\"rowData.MinTitleImgUrl\" lazy-load=\"true\" mode=\"aspectFit\" @click=\"previewImage(index2)\"></image>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t<view class=\"d-flex flex-1 flex-column ml-2 position-relative\" style=\"height: 180rpx;\">\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"font-weight font-32\">\r\n\t\t\t\t\t\t\t\t\t\t\t{{rowData.Name}}\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"font-28 text-light-muted mt-1\">\r\n\t\t\t\t\t\t\t\t\t\t\t已售{{rowData.SellCount}}\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t<view class=\"position-absolute\" style=\"bottom: 0;\">\r\n\t\t\t\t\t\t\t\t\t\t\t<view class=\"d-flex flex-row a-end\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"font-weight\"><price>{{rowData.Price}}</price></view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"ml font-20 text-light-muted line-through\" v-if=\"rowData.OldPrice != 0\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<text>￥{{rowData.OldPrice}}</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t\t<block v-if=\"!isshenhe\">\r\n\t\t\t\t\t\t\t\t\t\t\t<block v-if=\"rowData.Specifications || rowData.TasteList\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"position-absolute\" style=\"right: 0; bottom: 0;\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"border mr-2 font-28 d-flex a-center j-center pl-4 pr-4\" \r\n\t\t\t\t\t\t\t\t\t\t\t\t\tstyle=\"border-radius: 5rpx; background: #FFA500;\" @click=\"choosePopup(rowData.ID)\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<text v-if=\"rowData.Specifications\">选规格</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<text v-else>选口味</text>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"position-absolute\" style=\"right: 10rpx; top: -20rpx;\" v-if=\"getGoodsCount(rowData.ID)>0\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<uni-badge :text=\"getGoodsCount(rowData.ID)\" type=\"error\"></uni-badge>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t</block>\r\n\t\t\t\t\t\t\t\t\t\t\t<block v-else>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<view class=\"position-absolute\" style=\"right: 0; bottom: 0; z-index: 16;\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<hx-number-box :value=\"getGoodsCount(rowData.ID)\" :nameid=\"rowData.ID\" @createid=\"openCreateCartId\" />\r\n\t\t\t\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\t</block>\r\n\t\t\t\t\t\t\t\t\t\t</block>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</scroll-view>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t\t<!-- 购物车 -->\r\n\t\t\t\t<block v-if=\"!isshenhe\">\r\n\t\t\t\t\t<view class=\"main-bg-color-w d-flex flex-row a-center position-relative\" style=\"height: 90rpx;\" :style=\"'z-index:'+zindex\">\r\n\t\t\t\t\t\t<view class=\"d-flex flex-row a-center\" style=\"width: 80%;\"  @click=\"openCartDetail\">\r\n\t\t\t\t\t\t\t<view class=\"ml-3 position-relative\" style=\"width: 80rpx;\">\r\n\t\t\t\t\t\t\t\t<image src=\"/static/store/cart.png\" mode=\"widthFix\"></image>\r\n\t\t\t\t\t\t\t\t<view class=\"position-absolute\" style=\"right: -15rpx; top: -5rpx;\" v-if=\"getCartCount>0\">\r\n\t\t\t\t\t\t\t\t\t<uni-badge :text=\"getCartCount\" type=\"error\"></uni-badge>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<view class=\"ml-4\" v-if=\"isManyPeople && cartId != 0\">\r\n\t\t\t\t\t\t\t\t<view class=\"d-flex flex-row a-center\">\r\n\t\t\t\t\t\t\t\t\t<text class=\"font-30\">购物车ID:</text>\r\n\t\t\t\t\t\t\t\t\t<text class=\"font-30\" style=\"color: #FF582B;\">{{cartId}}</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<view class=\"ml-4\" v-if=\"totalPrice > 0\">\r\n\t\t\t\t\t\t\t\t<view class=\"d-flex flex-row a-center\">\r\n\t\t\t\t\t\t\t\t\t<text class=\"font-30\">价格:</text>\r\n\t\t\t\t\t\t\t\t\t<text class=\"font-30\" style=\"color: #FF582B;\">￥{{totalPrice}}</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t<view class=\"position-absolute\" style=\"height: 90rpx; right: 0;\" \r\n\t\t\t\t\t\t@click=\"toSettlement\" v-if=\"!isManyPeople || cartId != 0\"\r\n\t\t\t\t\t\t:style=\"totalPrice > 0 ? 'background-color: #FFA500':'background-color: #C0C0C0;'\">\r\n\t\t\t\t\t\t\t<view class=\"d-flex a-center pl-2 pr-2 font-32 font-weight\" style=\"height: 90rpx; color: #FFFFFF;\">\r\n\t\t\t\t\t\t\t\t去结算>>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<view class=\"position-absolute\" style=\"height: 90rpx; background-color: #FFA500; right: 0;\"\r\n\t\t\t\t\t\t@click=\"openCreateCartId\" v-if=\"isManyPeople && cartId == 0\">\r\n\t\t\t\t\t\t\t<view class=\"d-flex a-center pl-2 pr-2 font-32 font-weight\" style=\"height: 90rpx;\">\r\n\t\t\t\t\t\t\t\t创建/加入购物车\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</block>\r\n\t\t\t\t<!-- 商品规格层 -->\r\n\t\t\t\t<goods-popup ref=\"goodspopup\" @createid=\"openCreateCartId\"></goods-popup>\r\n\t\t\t\t\r\n\t\t\t\t<!-- 购物车抽屉层 -->\r\n\t\t\t\t<cart-popup ref=\"cartpopup\"></cart-popup>\r\n\t\t\t\t\r\n\t\t\t\t<!-- 创建购物车ID层 -->\r\n\t\t\t\t<block v-if=\"isManyPeople\">\r\n\t\t\t\t\t<create-cartid-popup ref=\"creatidpopup\"></create-cartid-popup>\r\n\t\t\t\t</block>\r\n\t\t\t</swiper-item>\r\n\t\t\t<swiper-item>\r\n\t\t\t\t<merchant ref=\"merchantRef\"></merchant>\r\n\t\t\t</swiper-item>\r\n\t\t\t<swiper-item>\r\n\t\t\t\t<!-- 公告 -->\r\n\t\t\t\t<notice ref=\"noticeRef\"></notice>\r\n\t\t\t</swiper-item>\r\n\t\t\t<!-- <swiper-item>333333333</swiper-item> -->\r\n\t\t</swiper>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport hxNumberBox from \"@/components/uni-number-box/uni-number-box.vue\";\r\n\timport price from \"@/components/common/price.vue\"\r\n\timport goodsPopup from \"@/components/cart/goods-popup.vue\"\r\n\timport cartPopup from \"@/components/cart/cart-popup.vue\"\r\n\timport createCartidPopup from \"@/components/cart/create-cartid-popup.vue\"\r\n\timport notice from \"@/components/notice/notice.vue\"\r\n\timport uniBadge from \"@/components/uni-badge/uni-badge.vue\"\r\n\timport merchant from \"@/components/merchant/merchant.vue\"\r\n\timport websocket from \"@/common/lib/websocket.js\"\r\n\t\r\n\timport {mapState,mapGetters,mapActions,mapMutations} from \"vuex\"\r\n\t\r\n\texport default {\r\n\t\tcomponents:{\r\n\t\t\thxNumberBox,\r\n\t\t\tprice,\r\n\t\t\tgoodsPopup,\r\n\t\t\tcartPopup,\r\n\t\t\tcreateCartidPopup,\r\n\t\t\tmerchant,\r\n\t\t\tnotice,\r\n\t\t\tuniBadge\r\n\t\t},\r\n\t\tprops:{\r\n\t\t\t\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tzindex:90,\r\n\t\t\t\tshowCartDrawer:false,\r\n\t\t\t\tshowPopup:false,\r\n\t\t\t\tscrollH:500, //可滑动区域高度\r\n\t\t\t\ttabIndex:0,\r\n\t\t\t\tcurrentId:1,\r\n\t\t\t\tcategoryList:[],\r\n\t\t\t\tgoodsList:[],\r\n\t\t\t\ttabScrollTop: 0,\r\n\t\t\t\tsizeCalcState: false,\r\n\t\t\t\tisFirst: true,\r\n\t\t\t\tcartIsOpen: false,\r\n\t\t\t\t//tabs\r\n\t\t\t\ttabs: [\r\n\t\t\t\t\t{name:'商品'},\r\n\t\t\t\t\t{name:'商家'},\r\n\t\t\t\t\t{name:'公告'},\r\n\t\t\t\t\t// {name:'平台'},\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad(){\r\n\t\t\t//获取可视区域高度\r\n\t\t\tuni.getSystemInfo({\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tthis.scrollH = res.windowHeight - uni.upx2px(75)\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t\r\n\t\t\tthis.initMerchantConfig()\r\n\t\t},\r\n\t\tcomputed:{\r\n\t\t\t...mapState({\r\n\t\t\t\tcartGoodsList:state=>state.cart.cartGoodsList,\r\n\t\t\t\tcartId:state=>state.cart.cartId,\r\n\t\t\t\tmerchantID:state=>state.merchant.merchantID,\r\n\t\t\t\ttableID:state=>state.merchant.tableID,\r\n\t\t\t\tisManyPeople:state=>state.merchant.isManyPeople,\r\n\t\t\t\tisshenhe:state=>state.user.isshenhe\r\n\t\t\t}),\r\n\t\t\t...mapGetters([\r\n\t\t\t\t'getGoodsCount',\r\n\t\t\t\t'getGoodsTypeCount',\r\n\t\t\t\t'getCartCount',\r\n\t\t\t\t'totalPrice'\r\n\t\t\t]),\r\n\t\t\tgetFilePaths(){\r\n\t\t\t\tvar temp = this.goodsList\r\n\t\t\t\tvar tempFilePaths = []\r\n\t\t\t\tfor (var i = 0; i < temp.length; i++) {\r\n\t\t\t\t\ttempFilePaths.push(temp[i].TitleImgUrl)\r\n\t\t\t\t}\r\n\t\t\t\treturn tempFilePaths\r\n\t\t\t},\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t...mapMutations([\r\n\t\t\t\t'updateCartGoodsList',\r\n\t\t\t\t'updateMerchantInfo',\r\n\t\t\t\t'updateMerchantStatus'\r\n\t\t\t]),\r\n\t\t\t...mapActions([\r\n\t\t\t\t'updateAllGoodsListFunc',\r\n\t\t\t\t'updateManyPeopleFunc',\r\n\t\t\t\t'updateCartIdFunc'\r\n\t\t\t]),\r\n\t\t\tinitMerchantConfig(){\r\n\t\t\t\tvar _self = this\r\n\t\t\t\t//初始化请求商品数据\r\n\t\t\t\t_self.$H.post('/api/Merchant/GetMerchantConfig',{\r\n\t\t\t\t\tMerchantID:_self.merchantID\r\n\t\t\t\t},{\r\n\t\t\t\t\ttoken:true,\r\n\t\t\t\t}).then(res=>{\r\n\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\tif(res.status == 0){\r\n\t\t\t\t\t\tif(res.data.OpenMultiplayerBuy == 0){\r\n\t\t\t\t\t\t\t_self.updateManyPeopleFunc(false)\r\n\t\t\t\t\t\t}else if(res.data.OpenMultiplayerBuy == 1){\r\n\t\t\t\t\t\t\t_self.updateManyPeopleFunc(true)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t_self.updateMerchantStatus(res.data)\r\n\t\t\t\t\t\t_self.syncGoodsInfo()\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//请求商品信息\r\n\t\t\tsyncGoodsInfo(){\r\n\t\t\t\tvar _self = this\r\n\t\t\t\t//初始化请求商品数据\r\n\t\t\t\t_self.$H.post('/api/Merchant/ProductList',{\r\n\t\t\t\t\tMerchantID:_self.merchantID\r\n\t\t\t\t},{\r\n\t\t\t\t\ttoken:true,\r\n\t\t\t\t}).then(res=>{\r\n\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\tif(res.status == 0){\r\n\t\t\t\t\t\tlet tempList = res.data\r\n\t\t\t\t\t\ttempList.ProductTypeList.forEach((item, index)=>{\r\n\t\t\t\t\t\t\titem.indexId = index + 1\r\n\t\t\t\t\t\t\titem.number = 0\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\ttempList.ProductList.forEach((item, index)=>{\r\n\t\t\t\t\t\t\titem.id = index + 1\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t_self.categoryList = tempList.ProductTypeList\r\n\t\t\t\t\t\t_self.goodsList = tempList.ProductList\r\n\t\t\t\t\t\t_self.updateAllGoodsListFunc(_self.goodsList)\r\n\t\t\t\t\t\t_self.getMerchantInfo()\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//获取商家信息\r\n\t\t\tgetMerchantInfo(){\r\n\t\t\t\tvar _self = this\r\n\t\t\t\tvar postData = { \r\n\t\t\t\t\tid: _self.merchantID\r\n\t\t\t\t}\r\n\t\t\t\t_self.$H.post('/api/merchant/Intro', postData).then(res=>{\r\n\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\tif(res.status == 0){\r\n\t\t\t\t\t\t_self.updateMerchantInfo(res.data)\r\n\t\t\t\t\t\t//初始化商家信息\r\n\t\t\t\t\t\t_self.$refs.merchantRef.initMerchantInfo(_self.scrollH)\r\n\t\t\t\t\t\t//初始化公告信息\r\n\t\t\t\t\t\t_self.$refs.noticeRef.initNoticeList(_self.scrollH)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tpreviewImage(index){\r\n\t\t\t\tvar tempFilePaths = this.getFilePaths\r\n\t\t\t\tuni.previewImage({\r\n\t\t\t\t\tcurrent:index,\r\n\t\t\t\t\turls:tempFilePaths,\r\n\t\t\t\t\tindicator:'number',\r\n\t\t\t\t\tloop:true\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//规格选择\r\n\t\t\tchoosePopup(goodsId){\r\n\t\t\t\tthis.zindex = 90\r\n\t\t\t\tthis.$refs.goodspopup.showPopup(goodsId)\r\n\t\t\t},\r\n\t\t\t//购物车详情页\r\n\t\t\topenCartDetail(){\r\n\t\t\t\tif(this.cartId != 0){\r\n\t\t\t\t\tif(!this.cartIsOpen){\r\n\t\t\t\t\t\tthis.zindex = 100\r\n\t\t\t\t\t\tthis.$refs.cartpopup.showCartPopup()\r\n\t\t\t\t\t\tthis.cartIsOpen = true\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.$refs.cartpopup.closeCartPopup()\r\n\t\t\t\t\t\tthis.cartIsOpen = false\r\n\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tuni.showToast({title:'您还没有点餐', icon: 'none' })\r\n\t\t\t\t}\r\n\t\t\t},\t\t\r\n\t\t\t//创建购物车ID\r\n\t\t\topenCreateCartId(){\r\n\t\t\t\tthis.$refs.creatidpopup.showPopup()\r\n\t\t\t},\r\n\t\t\ttoSettlement(){\r\n\t\t\t\tif(this.cartGoodsList.length > 0){\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl:'../payment/payment?cartID='+this.cartId\r\n\t\t\t\t\t})\r\n\t\t\t\t}else{\r\n\t\t\t\t\tuni.showToast({title:'您还没有点餐', icon: 'none' })\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\tchangeTab(index){\r\n\t\t\t\tthis.tabIndex = index\r\n\t\t\t},\r\n\t\t\t//监听滑动列表\r\n\t\t\tonChangeTab(e){\r\n\t\t\t\tthis.changeTab(e.detail.current)\r\n\t\t\t},\r\n\t\t\t//一级分类点击\r\n\t\t\tshowCategory(item){\r\n\t\t\t\tif(this.isFirst){\r\n\t\t\t\t\t//点击后计算属性\r\n\t\t\t\t\tthis.isFirst = false\r\n\t\t\t\t\tthis.calcSize()\r\n\t\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\t\tthis.showCategory(item)\r\n\t\t\t\t\t}, 200)\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.currentId = item.indexId;\r\n\t\t\t\t\tthis.tabScrollTop = this.categoryList[item.indexId - 1].top + 5;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasideScroll(e){\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tif(that.isFirst){\r\n\t\t\t\t\tthat.isFirst = false\r\n\t\t\t\t\tthat.calcSize()\r\n\t\t\t\t}else{\r\n\t\t\t\t\tlet scrollTop = Math.round(e.detail.scrollTop);\r\n\t\t\t\t\tlet tabs = that.categoryList.filter(item=>item.top <= scrollTop).reverse();\r\n\t\t\t\t\tif(tabs.length > 0){\r\n\t\t\t\t\t\tthat.currentId = tabs.length\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//计算右侧栏每个tab的高度等信息\r\n\t\t\tcalcSize(){\r\n\t\t\t\tlet h = 0;\r\n\t\t\t\tthis.categoryList.forEach(item=>{\r\n\t\t\t\t\tif(!this.sizeCalcState){\r\n\t\t\t\t\t\tlet view = uni.createSelectorQuery().select(\"#goodsBox\" + item.indexId);\r\n\t\t\t\t\t\tview.fields({\r\n\t\t\t\t\t\t\tsize: true\r\n\t\t\t\t\t\t}, data => {\r\n\t\t\t\t\t\t\titem.top = h;\r\n\t\t\t\t\t\t\th += Math.round(data.height);\r\n\t\t\t\t\t\t\titem.bottom = h;\r\n\t\t\t\t\t\t\tthis.sizeCalcState = true;\r\n\t\t\t\t\t\t}).exec();\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\r\n</style>\r\n"],"sourceRoot":""}