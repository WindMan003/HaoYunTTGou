(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-payment-payment"],{"24d4":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={props:{priceSize:{type:String,default:"font-28"},unitSize:{type:String,default:"font-28"}}};e.default=a},"5d5c":function(t,e,i){"use strict";var a,n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticStyle:{"background-color":"#F5F5F5"}},[i("v-uni-view",{staticClass:"bg-white d-flex flex-row a-center",staticStyle:{height:"70rpx"}},[i("v-uni-view",{staticClass:"ml-3"},[t._v("座位号：")]),i("v-uni-view",{staticClass:"ml",staticStyle:{color:"#007AFF"}},[t._v(t._s(t.tableID))])],1),i("v-uni-view",{staticClass:"mt-3 bg-white"},[i("v-uni-view",{staticClass:"d-flex flex-row a-center",staticStyle:{height:"60rpx"}},[i("v-uni-view",{staticClass:"ml-3"},[t._v("已点商品")])],1),i("v-uni-scroll-view",{style:"max-height:"+t.scrollH+"px;",attrs:{"scroll-y":!0}},[t._l(t.cartGoodsList,(function(e,a){return[i("v-uni-view",{key:a+"_0",staticStyle:{"background-color":"#F5F5F5"}},[i("v-uni-view",{staticClass:"row ml-3 mb-1 p-1",class:0!=a?"mt-2":""},[i("v-uni-view",{staticClass:"main-bg-color-w",staticStyle:{flex:"0 0 150rpx",height:"150rpx","border-radius":"8rpx"}},[i("v-uni-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:e.TitleImgUrl,mode:"aspectFit"}})],1),i("v-uni-view",{staticClass:"d-flex flex-column ml-3 flex-1 position-relative"},[i("v-uni-view",{staticClass:"font-32 font-weight"},[t._v(t._s(e.ProductName))]),i("v-uni-view",{staticClass:"font-24 mb-auto"},[t._v(t._s(t.getSpecStr(e)))]),i("v-uni-view",{staticClass:"font-24"},[i("v-uni-text",[t._v(t._s("x "+e.Count))])],1),i("v-uni-view",{staticClass:"position-absolute font-weight",staticStyle:{right:"20rpx",bottom:"10rpx"}},[i("price",[t._v(t._s(e.Price*e.Count))])],1)],1)],1)],1)]}))],2)],1),i("v-uni-view",{staticClass:"w-100 main-bg-color-w bottom-0 d-flex flex-row position-absolute",staticStyle:{height:"90rpx","margin-bottom":"90rpx"}},[i("v-uni-view",{staticClass:"d-flex flex-row a-center ml-3"},[i("v-uni-text",{staticClass:"font-32"},[t._v("总价：")]),i("v-uni-text",{staticClass:"font-32",staticStyle:{color:"#FF582B"}},[t._v(t._s("¥"+t.totalPrice))])],1),i("v-uni-view",{staticClass:"position-absolute",staticStyle:{height:"90rpx","background-color":"#FFA500",right:"0"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.submitOrder.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"d-flex a-center pl-2 pr-2 font-32 font-weight",staticStyle:{height:"90rpx"}},[t._v("确认订单")])],1)],1),i("v-uni-view",{staticClass:"mb-0 position-absolute",staticStyle:{height:"90rpx"}})],1)},r=[];i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return a}))},"7b8f":function(t,e,i){"use strict";i.r(e);var a=i("24d4"),n=i.n(a);for(var r in a)"default"!==r&&function(t){i.d(e,t,(function(){return a[t]}))}(r);e["default"]=n.a},ab68:function(t,e,i){"use strict";var a,n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"d-flex",class:t.priceSize,staticStyle:{color:"#FF582B"}},[i("v-uni-text",{staticClass:"a-self-start mr",class:t.unitSize},[t._v("¥")]),t._t("default")],2)},r=[];i.d(e,"b",(function(){return n})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return a}))},ccf7:function(t,e,i){"use strict";i.r(e);var a=i("ab68"),n=i("7b8f");for(var r in n)"default"!==r&&function(t){i.d(e,t,(function(){return n[t]}))}(r);var s,c=i("f0c5"),o=Object(c["a"])(n["default"],a["b"],a["c"],!1,null,"781d2cb5",null,!1,a["a"],s);e["default"]=o.exports},ebd9:function(t,e,i){"use strict";i.r(e);var a=i("5d5c"),n=i("efc2");for(var r in n)"default"!==r&&function(t){i.d(e,t,(function(){return n[t]}))}(r);var s,c=i("f0c5"),o=Object(c["a"])(n["default"],a["b"],a["c"],!1,null,"444698f6",null,!1,a["a"],s);e["default"]=o.exports},efc2:function(t,e,i){"use strict";i.r(e);var a=i("f4f5"),n=i.n(a);for(var r in a)"default"!==r&&function(t){i.d(e,t,(function(){return a[t]}))}(r);e["default"]=n.a},f4f5:function(t,e,i){"use strict";var a=i("ee27");i("99af"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(i("f3f3")),r=a(i("ccf7")),s=i("2f62"),c={components:{price:r.default},data:function(){return{scrollH:0,isTouch:!0,cartID:0}},onLoad:function(t){var e=this;uni.getSystemInfo({success:function(t){e.scrollH=t.windowHeight-uni.upx2px(340)}}),this.cartID=t.cartID},computed:(0,n.default)({},(0,s.mapState)({tableID:function(t){return t.merchant.tableID},cartGoodsList:function(t){return t.cart.cartGoodsList},merchantID:function(t){return t.merchant.merchantID},merchantStatus:function(t){return t.merchant.merchantStatus}}),{},(0,s.mapGetters)([]),{totalPrice:function(){for(var t=0,e=0;e<this.cartGoodsList.length;e++)t+=this.cartGoodsList[e].Count*this.cartGoodsList[e].Price;return t}}),methods:(0,n.default)({},(0,s.mapMutations)(["clearCartList","updateOrderID"]),{},(0,s.mapActions)(["updateCartIdFunc"]),{getSpecStr:function(t){var e=t.TasteName?t.TasteName:"",i=t.SpecificationName?t.SpecificationName:"";return e&&i?"规格：".concat(i,"  ").concat(e):i?"规格：".concat(i):e?"口味：".concat(e):""},submitOrder:function(){var t=this;console.log("确认订单"),uni.showLoading({title:"订单确认中..."});var e={MerchantID:t.merchantID,CartID:t.cartID,OrderID:0,UserNote:""};console.log(e),t.$H.post("/api/order/SubmitOrder",e,{token:!0}).then((function(e){uni.hideLoading(),uni.showToast({title:e.message,icon:"none",duration:2e3}),console.log(e),0==e.status?(t.updateOrderID(e.data),t.updateCartIdFunc(0),t.clearCartList(),1==t.merchantStatus.IsMustPayFirst?uni.redirectTo({url:"./payment-order?orderID="+e.data}):uni.navigateBack({animationType:"pop-out",animationDuration:200})):uni.showToast({title:e.Message,icon:"none",duration:1e3})}))}})};e.default=c}}]);