(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-login-login"],{"0454":function(n,e,t){"use strict";t.r(e);var o=t("1ce3"),i=t.n(o);for(var a in o)"default"!==a&&function(n){t.d(e,n,(function(){return o[n]}))}(a);e["default"]=i.a},"11b2":function(n,e,t){"use strict";var o,i=function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("v-uni-view",{staticClass:"main",staticStyle:{height:"100%","background-color":"#EEEEEE"}},[t("v-uni-view",{staticStyle:{height:"500rpx"}}),t("v-uni-view",{},[t("v-uni-button",{attrs:{type:"primary","open-type":"getUserInfo",withCredentials:"true"},on:{getuserinfo:function(e){arguments[0]=e=n.$handleEvent(e),n.wxGetUserInfo.apply(void 0,arguments)}}},[n._v("微信登录")])],1)],1)},a=[];t.d(e,"b",(function(){return i})),t.d(e,"c",(function(){return a})),t.d(e,"a",(function(){return o}))},"1ce3":function(n,e,t){"use strict";var o=t("ee27");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=o(t("f3f3")),a=t("2f62"),u={data:function(){return{}},onLoad:function(n){n.MerchantID?(this.updateMerchantID(n.MerchantID),this.updateTableID(n.TableID)):(this.updateMerchantID(1),this.updateTableID(1))},methods:(0,i.default)({},(0,a.mapMutations)(["login","updateMerchantID","updateTableID"]),{weixinLogin:function(){var n=this;uni.showLoading({title:"登陆中..."}),uni.login({provider:"weixin",success:function(e){console.log(e),uni.getUserInfo({provider:"weixin",success:function(t){console.log(t),console.log("用户昵称为："+t.userInfo.nickName),uni.showLoading({title:"登陆中..."}),n.$H.post("/api/user/login",{WxCode:e.code,account:e.code,password:e.code,Gender:t.userInfo.gender,AvatarUrl:t.userInfo.avatarUrl,NickName:t.userInfo.nickName,City:t.userInfo.city,Province:t.userInfo.province}).then((function(e){console.log(e),uni.hideLoading(),0==e.status&&(n.login(e.data),n.gotoIndex())}))},fail:function(t){console.log("获取用户信息失败！"+t.errMsg),uni.showLoading({title:"登陆中..."}),n.$H.post("/api/user/login",{WxCode:e.code,account:e.code,password:e.code,Gender:"",AvatarUrl:"",NickName:"",City:"",Province:""}).then((function(e){console.log(e),uni.hideLoading(),0==e.status&&(n.login(e.data),n.gotoIndex())}))}})}})},gotoIndex:function(){uni.switchTab({url:"../index/index"})},wxGetUserInfo:function(n){if(!n.detail.iv)return uni.showToast({title:"您取消了授权,登录失败",icon:"none"}),!1;this.weixinLogin()}})};e.default=u},a350:function(n,e,t){"use strict";t.r(e);var o=t("11b2"),i=t("0454");for(var a in i)"default"!==a&&function(n){t.d(e,n,(function(){return i[n]}))}(a);var u,r=t("f0c5"),c=Object(r["a"])(i["default"],o["b"],o["c"],!1,null,"2d89d706",null,!1,o["a"],u);e["default"]=c.exports}}]);